import{r as h,j as e,O as x,B as l,T as u,al as E,I as S,az as z,aA as B,_ as W,aB as P,aC as L,aD as R,aE as G,aF as T,aG as _,aH as D,aI as F,N,aJ as O,aK as $,F as U,s as H,t as M,M as Y,G as C,aL as J,h as K}from"./mui-mRVmBbre.js";import{i as o,A as V,a as f,h as A,u as X,b as q,c as Q,L as Z,N as ee}from"./index-tM-Ac5N7.js";import"./vendor-Bzgz95E1.js";import"./redux-DbjaNwcH.js";import"./utils-DP_tgNw_.js";import"./router-BwhLjOj0.js";const te=x(l)(({theme:t})=>({position:"relative",width:"100%",height:"550px",overflow:"hidden",marginBottom:t.spacing(4),"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(var(--carousel-overlay), var(--carousel-overlay-dark))",pointerEvents:"none"}})),ae=x(l)(({theme:t})=>({position:"absolute",width:"100%",height:"100%",opacity:0,transition:"opacity 0.9s ease-in-out","&.active":{opacity:1}})),oe=W`
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.12);
  }
`,se=x("img")({width:"100%",height:"100%",objectFit:"cover",animation:`${oe} 15s linear infinite`}),ie=x(l)(({theme:t})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",zIndex:2,width:"90%",maxWidth:"800px",padding:t.spacing(3),animation:"$fadeIn 1s ease-out","@keyframes fadeIn":{from:{opacity:0,transform:"translate(-50%, -40%)"},to:{opacity:1,transform:"translate(-50%, -50%)"}}})),re=x(l)(({theme:t})=>({position:"absolute",top:"50%",width:"100%",display:"flex",justifyContent:"space-between",padding:t.spacing(0,2),transform:"translateY(-50%)",zIndex:2})),le=x(l)(({theme:t})=>({position:"absolute",bottom:t.spacing(2),left:"50%",transform:"translateX(-50%)",display:"flex",gap:t.spacing(1),zIndex:2})),ne=x(l)(({theme:t})=>({width:40,height:4,backgroundColor:"var(--carousel-dot)",cursor:"pointer",transition:"all 0.3s ease-in-out","&.active":{backgroundColor:t.palette.primary.main,width:50},"&:hover":{backgroundColor:t.palette.primary.light}})),ce=()=>{const[t,c]=h.useState(0),[n,d]=h.useState([]),[y,v]=h.useState(!0),[p,g]=h.useState(null);h.useEffect(()=>{(async()=>{v(!0);try{const a=await f.carousel.getAll(),r=a.data?.data||a.data||[];d(Array.isArray(r)?r:[]),g(null)}catch(a){const r=A(a,o.t("images.loadingError"));g(r.message),d([])}finally{v(!1)}})()},[]);const s=h.useCallback(()=>{c(i=>(i+1)%n.length)},[n]),b=h.useCallback(()=>{c(i=>(i-1+n.length)%n.length)},[n]),j=h.useCallback(i=>{c(i)},[]);return h.useEffect(()=>{if(n.length>0){const i=setInterval(s,5e3);return()=>clearInterval(i)}},[s,n]),e.jsxs(te,{children:[e.jsxs(l,{children:[e.jsx(l,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"var(--carousel-overlay-bg)"}}),e.jsxs(ie,{children:[e.jsx(u,{variant:"h2",sx:{mb:3,color:"white",fontWeight:900,textShadow:"2px 2px 4px var(--carousel-text-shadow)",fontSize:{xs:"2rem",sm:"3rem",md:"4rem"}},children:o.t("home.welcome.title")}),e.jsx(E,{sx:{my:2,borderColor:"primary.main",borderWidth:2,width:250,mx:"auto",borderRadius:2,opacity:1}}),e.jsx(u,{variant:"h4",sx:{fontWeight:500,color:"white",textShadow:"1px 1px 3px var(--carousel-text-shadow)",fontSize:{xs:"1.2rem",sm:"1.5rem",md:"2rem"}},children:o.t("home.welcome.subtitle")})]})]}),y?e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(u,{children:o.t("common.actions.loading")})}):p?e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(u,{color:"error",children:p})}):n.length===0?e.jsx(l,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(u,{children:o.t("home.carousel.noImages")})}):n.map((i,a)=>e.jsx(ae,{className:a===t?"active":"",children:e.jsx(se,{src:`${V}${i.image_url}`,alt:`Slide ${a+1}`})},i.id||i._id)),e.jsxs(re,{children:[e.jsx(S,{onClick:b,sx:{color:"var(--carousel-button-hover)",backgroundColor:"var(--carousel-button-bg)",boxShadow:"0 4px 16px var(--carousel-button-shadow)",width:{xs:30,sm:40,md:48},height:{xs:30,sm:40,md:48},"& svg":{fontSize:{xs:24,sm:28,md:32}},"&:hover":{backgroundColor:"var(--carousel-button-hover-bg)",transform:"scale(1.15)",color:"var(--carousel-button-active)",border:"2px solid var(--carousel-button-active)"},border:"2px solid var(--carousel-dot-inactive)",transition:"all 0.3s"},children:e.jsx(z,{})}),e.jsx(S,{onClick:s,sx:{color:"var(--carousel-button-hover)",backgroundColor:"var(--carousel-button-bg)",boxShadow:"0 4px 16px var(--carousel-button-shadow)",width:{xs:30,sm:40,md:48},height:{xs:30,sm:40,md:48},"& svg":{fontSize:{xs:24,sm:28,md:32}},"&:hover":{backgroundColor:"var(--carousel-button-active-bg)",transform:"scale(1.15)",color:"var(--carousel-button-active)",border:"2px solid var(--carousel-button-active)"},border:"2px solid var(--carousel-dot-inactive)",transition:"all 0.3s"},children:e.jsx(B,{})})]}),e.jsx(le,{children:n.map((i,a)=>e.jsx(ne,{className:a===t?"active":"",onClick:()=>j(a)},a))})]})},I=x(K,{shouldForwardProp:t=>t!=="isTotal"})(({theme:t,isTotal:c})=>({padding:t.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing(2),backgroundColor:c?t.palette.primary.main:"white",color:c?"white":t.palette.text.primary,borderRadius:"10px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)",transition:"all 0.3s ease","&:hover":{transform:"translateY(-10px)",boxShadow:"0 8px 25px rgba(0,0,0,0.2)"}})),k=x(l,{shouldForwardProp:t=>t!=="isTotal"})(({theme:t,isTotal:c})=>({width:60,height:60,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:c?"white":t.palette.primary.main,color:c?t.palette.primary.main:"white",marginBottom:t.spacing(2)})),w=x(u)(({theme:t})=>({textAlign:"center",fontWeight:"bold",color:t.palette.text.primary})),ge=()=>{const{user:t,isUserFullyLoaded:c,syncUser:n}=X(),{selectedChurch:d,changeSelectedChurch:y,churches:v}=q(),{isAdmin:p,isSuperAdmin:g}=Q(),[s,b]=h.useState(null);h.useEffect(()=>{t&&!c&&n()},[t,c,n]),h.useEffect(()=>{(async()=>{try{let r;if(p||g){let m=null;d?.id||d?._id?m=d.id||d._id:t?.eglise_locale&&(m=typeof t.eglise_locale=="object"?t.eglise_locale.id||t.eglise_locale._id:t.eglise_locale),m?r=await f.stats.getOverview({churchId:m}):r=await f.stats.getOverview()}else{let m=null;t?.eglise_locale&&(m=typeof t.eglise_locale=="object"?t.eglise_locale.id:t.eglise_locale),m?r=await f.stats.getOverview({churchId:m}):r=await f.stats.getOverview()}b(r.data?.data||r.data||{})}catch(r){A(r,o.t("errors.api.loadStats")),b({})}})()},[t,d]);const j=a=>{y(a)};if(!s)return e.jsx(Z,{titre:o.t("home.statsLoading")});const i=[{label:o.t("home.gouvernance"),value:s.total_gouvernance,icon:P},{label:o.t("home.totalReseaux"),value:s.total_reseaux,icon:L},{label:o.t("home.responsablesReseaux"),value:s.total_resp_reseaux,icon:R},{label:o.t("home.totalGr"),value:s.total_gr,icon:G},{label:o.t("home.responsablesGr"),value:s.total_resp_gr,icon:T},{label:o.t("home.leaders"),value:s.total_leaders,icon:_},{label:o.t("home.leadersTous"),value:s.total_leaders_all,icon:_},{label:o.t("home.membresReguliers"),value:s.total_reguliers,icon:D},{label:o.t("home.membresEnIntegration"),value:s.total_integration,icon:F},{label:o.t("home.membresIrrÃ©guliers"),value:s.total_irreguliers,icon:N},{label:o.t("home.ecodim"),value:s.total_ecodim,icon:O},{label:o.t("home.responsablesEcodim"),value:s.total_resp_ecodim,icon:$}];return e.jsxs(l,{children:[e.jsx(ee,{}),e.jsx(ce,{}),e.jsxs(l,{width:"100%",textAlign:"center",children:[e.jsx(u,{variant:"h3",sx:{mb:4,textAlign:"center",fontWeight:"bold",color:"primary.main"},children:o.t("home.title")}),(p||g)&&e.jsx(l,{sx:{mb:3,display:"flex",justifyContent:"center"},children:e.jsxs(U,{sx:{minWidth:250},children:[e.jsx(H,{id:"home-church-select-label",children:o.t("home.filterByChurch")}),e.jsx(M,{id:"home-church-select",name:"church",value:d?.id||d?._id||"",onChange:a=>j(a.target.value),displayEmpty:!0,label:o.t("home.filterByChurch"),labelId:"home-church-select-label",autoComplete:"off",renderValue:a=>d?d.nom:o.t("home.selectChurch"),children:v.map(a=>e.jsx(Y,{value:a.id||a._id,children:a.nom},a.id||a._id))})]})}),e.jsxs(C,{container:!0,width:"92%",mx:"auto",children:[i.map((a,r)=>e.jsx(C,{"data-aos":"fade-up",sx:{width:"100%",padding:"10px 10px 10px 10px","@media (min-width:460px) and (max-width:699px)":{width:"50%",height:"270px"},"@media (min-width:700px) and (max-width:1099px)":{width:"33.33%",height:"270px"},"@media (min-width:1100px) and (max-width:1199px)":{width:"25%",height:"270px"},"@media (min-width:1200px) and (max-width:1599px)":{width:"20%",height:"270px"},"@media (min-width:1600px)":{width:"20%"},flexBasis:"unset",maxWidth:"unset",flexGrow:0,flexShrink:0,height:"100%"},children:e.jsxs(I,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(k,{children:e.jsx(a.icon,{sx:{fontSize:30}})}),e.jsx(w,{variant:"h6",children:a.label}),e.jsx(w,{variant:"h4",color:"primary",children:a.value})]})},r)),e.jsx(C,{"data-aos":"fade-up",sx:{width:"100%",padding:"10px 10px 10px 10px","@media (min-width:460px) and (max-width:699px)":{width:"50%",height:"270px"},"@media (min-width:700px) and (max-width:1099px)":{width:"33.33%",height:"270px"},"@media (min-width:1100px) and (max-width:1199px)":{width:"25%",height:"270px"},"@media (min-width:1200px) and (max-width:1599px)":{width:"20%",height:"270px"},"@media (min-width:1600px)":{width:"20%"},flexBasis:"unset",maxWidth:"unset",flexGrow:0,flexShrink:0,height:"100%"},children:e.jsxs(I,{isTotal:!0,sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(k,{isTotal:!0,children:e.jsx(J,{sx:{fontSize:30,color:"primary.main"}})}),e.jsx(w,{variant:"h6",sx:{color:"white"},children:o.t("home.totalEffectif")}),e.jsx(w,{variant:"h3",sx:{color:"white"},children:s.total_all})]})})]})]})]})};export{ge as default};
