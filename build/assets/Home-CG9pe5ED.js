import{r as h,j as e,O as x,B as o,T as g,al as A,I as C,az as E,aA as z,_ as W,aB as B,aC as R,aD as P,aE as L,aF as G,aG as I,aH as D,aI as N,N as O,aJ as $,aK as U,F as H,s as M,t as T,M as Y,G as S,aL as J,h as K}from"./mui-mRVmBbre.js";import{i,A as V,a as b,h as F,u as X,b as q,c as Q,L as Z,N as ee}from"./index-D-mMtbrf.js";import"./vendor-Bzgz95E1.js";import"./redux-DbjaNwcH.js";import"./utils-DP_tgNw_.js";import"./router-BwhLjOj0.js";const te=x(o)(({theme:t})=>({position:"relative",width:"100%",height:"600px",overflow:"hidden",marginBottom:t.spacing(4),borderRadius:"0 0 40px 40px",boxShadow:"0 20px 60px rgba(102, 45, 145, 0.13)","&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(180deg, rgba(90, 33, 182, 0.04) 0%, rgba(90, 33, 182, 0.06) 50%, rgba(90, 33, 182, 0.12) 100%)",pointerEvents:"none",zIndex:1}})),ae=x(o)(({theme:t})=>({position:"absolute",width:"100%",height:"100%",opacity:0,transition:"opacity 1.2s cubic-bezier(0.4, 0, 0.2, 1)","&.active":{opacity:1,"& img":{transform:"scale(1.05)"}}})),ie=W`
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.15);
  }
`,re=x("img")({width:"100%",height:"100%",objectFit:"cover",animation:`${ie} 20s ease-in-out infinite alternate`,filter:"brightness(0.85) contrast(1.1)",transition:"transform 1.2s cubic-bezier(0.4, 0, 0.2, 1)"}),se=x(o)(({theme:t})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",color:"white",zIndex:3,width:"90%",maxWidth:"900px",padding:t.spacing(4),background:"rgba(102, 45, 145, 0.15)",backdropFilter:"blur(15px)",borderRadius:"30px",border:"2px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",animation:"$fadeIn 1.2s cubic-bezier(0.4, 0, 0.2, 1)","@keyframes fadeIn":{from:{opacity:0,transform:"translate(-50%, -40%) scale(0.9)"},to:{opacity:1,transform:"translate(-50%, -50%) scale(1)"}},"& h3, & h4, & h5":{textShadow:"0 4px 12px rgba(0, 0, 0, 0.5)",fontWeight:700,letterSpacing:"0.5px"}})),oe=x(o)(({theme:t})=>({position:"absolute",top:"50%",width:"100%",display:"flex",justifyContent:"space-between",padding:t.spacing(0,2),transform:"translateY(-50%)",zIndex:2})),ne=x(o)(({theme:t})=>({position:"absolute",bottom:t.spacing(2),left:"50%",transform:"translateX(-50%)",display:"flex",gap:t.spacing(1),zIndex:2})),le=x(o)(({theme:t})=>({width:40,height:4,backgroundColor:"var(--carousel-dot)",cursor:"pointer",transition:"all 0.3s ease-in-out","&.active":{backgroundColor:t.palette.primary.main,width:50},"&:hover":{backgroundColor:t.palette.primary.light}})),de=()=>{const[t,r]=h.useState(0),[d,c]=h.useState([]),[y,f]=h.useState(!0),[m,u]=h.useState(null);h.useEffect(()=>{(async()=>{f(!0);try{const a=await b.carousel.getAll(),l=a.data?.data||a.data||[];c(Array.isArray(l)?l:[]),u(null)}catch(a){const l=F(a,i.t("images.loadingError"));u(l.message),c([])}finally{f(!1)}})()},[]);const s=h.useCallback(()=>{r(n=>(n+1)%d.length)},[d]),w=h.useCallback(()=>{r(n=>(n-1+d.length)%d.length)},[d]),j=h.useCallback(n=>{r(n)},[]);return h.useEffect(()=>{if(d.length>0){const n=setInterval(s,5e3);return()=>clearInterval(n)}},[s,d]),e.jsxs(te,{children:[e.jsxs(o,{children:[e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,bgcolor:"var(--carousel-overlay-bg)"}}),e.jsxs(se,{children:[e.jsx(g,{variant:"h2",sx:{mb:3,color:"white",fontWeight:900,textShadow:"2px 2px 4px var(--carousel-text-shadow)",fontSize:{xs:"2rem",sm:"3rem",md:"4rem"}},children:i.t("home.welcome.welcomeMessage")}),e.jsx(A,{sx:{my:2,borderColor:"primary.main",borderWidth:2,width:250,mx:"auto",borderRadius:2,opacity:1}}),e.jsx(g,{variant:"h4",sx:{fontWeight:500,color:"white",textShadow:"1px 1px 3px var(--carousel-text-shadow)",fontSize:{xs:"1.2rem",sm:"1.5rem",md:"2rem"}},children:i.t("home.welcome.subtitle")})]})]}),y?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(g,{children:i.t("common.actions.loading")})}):m?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(g,{color:"error",children:m})}):d.length===0?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(g,{children:i.t("home.carousel.noImages")})}):d.map((n,a)=>e.jsx(ae,{className:a===t?"active":"",children:e.jsx(re,{src:`${V}${n.image_url}`,alt:`Slide ${a+1}`})},n.id||n._id)),e.jsxs(oe,{children:[e.jsx(C,{onClick:w,sx:{color:"white",background:"linear-gradient(135deg,rgba(102, 45, 145, 0.35),rgba(158, 0, 92, 0.3))",boxShadow:"0 4px 16px rgba(102, 45, 145, 0.3)",width:{xs:30,sm:40,md:48},height:{xs:30,sm:40,md:48},"& svg":{fontSize:{xs:24,sm:28,md:32}},"&:hover":{background:"linear-gradient(135deg,rgba(102, 45, 145, 0.35),rgba(158, 0, 92, 0.3))",transform:"scale(1.15)",boxShadow:"0 6px 20px rgba(102, 45, 145, 0.4)"},transition:"all 0.3s"},children:e.jsx(E,{})}),e.jsx(C,{onClick:s,sx:{color:"white",background:"linear-gradient(135deg,rgba(102, 45, 145, 0.35),rgba(158, 0, 92, 0.3))",boxShadow:"0 4px 16px rgba(102, 45, 145, 0.3)",width:{xs:30,sm:40,md:48},height:{xs:30,sm:40,md:48},"& svg":{fontSize:{xs:24,sm:28,md:32}},"&:hover":{background:"linear-gradient(135deg,rgba(102, 45, 145, 0.35),rgba(158, 0, 92, 0.3))",transform:"scale(1.15)",boxShadow:"0 6px 20px rgba(102, 45, 145, 0.4)"},transition:"all 0.3s"},children:e.jsx(z,{})})]}),e.jsx(ne,{children:d.map((n,a)=>e.jsx(le,{className:a===t?"active":"",onClick:()=>j(a)},a))})]})},_=x(K,{shouldForwardProp:t=>t!=="isTotal"})(({theme:t,isTotal:r})=>({padding:t.spacing(3),display:"flex",flexDirection:"column",alignItems:"center",gap:t.spacing(2),background:r?"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)":"linear-gradient(145deg, #FFFFFF 0%, #F5F3FF 100%)",color:r?"white":t.palette.text.primary,borderRadius:"20px",boxShadow:r?"0 10px 40px rgba(102, 45, 145, 0.25)":"0 4px 20px rgba(102, 45, 145, 0.08)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden",border:r?"none":"1px solid rgba(102, 45, 145, 0.1)","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:r?"linear-gradient(90deg, rgba(255,255,255,0.3), rgba(255,255,255,0.6), rgba(255,255,255,0.3))":"linear-gradient(90deg, #662d91, #9e005d, #9e005d)",opacity:0,transition:"opacity 0.4s ease"},"&:hover":{transform:"translateY(-12px) scale(1.02)",boxShadow:r?"0 20px 60px rgba(102, 45, 145, 0.35)":"0 15px 50px rgba(102, 45, 145, 0.18)","&::before":{opacity:1}}})),k=x(o,{shouldForwardProp:t=>t!=="isTotal"})(({theme:t,isTotal:r})=>({width:70,height:70,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:r?"linear-gradient(135deg, rgba(255,255,255,0.25), rgba(255,255,255,0.1))":"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)",color:"white",marginBottom:t.spacing(2),boxShadow:r?"0 8px 20px rgba(255, 255, 255, 0.2)":"0 8px 20px rgba(102, 45, 145, 0.25)",transition:"all 0.4s ease",backdropFilter:r?"blur(10px)":"none",border:r?"2px solid rgba(255,255,255,0.3)":"none","&:hover":{transform:"scale(1.15) rotate(5deg)",boxShadow:r?"0 12px 30px rgba(255, 255, 255, 0.3)":"0 12px 30px rgba(102, 45, 145, 0.35)"}})),v=x(g)(({theme:t})=>({textAlign:"center",fontWeight:"bold",color:t.palette.text.primary})),ue=()=>{const{user:t,isUserFullyLoaded:r,syncUser:d}=X(),{selectedChurch:c,changeSelectedChurch:y,churches:f}=q(),{isAdmin:m,isSuperAdmin:u}=Q(),[s,w]=h.useState(null);h.useEffect(()=>{t&&!r&&d()},[t,r,d]),h.useEffect(()=>{(async()=>{try{let l;if(m||u){let p=null;c?.id||c?._id?p=c.id||c._id:t?.eglise_locale&&(p=typeof t.eglise_locale=="object"?t.eglise_locale.id||t.eglise_locale._id:t.eglise_locale),p?l=await b.stats.getOverview({churchId:p}):l=await b.stats.getOverview()}else{let p=null;t?.eglise_locale&&(p=typeof t.eglise_locale=="object"?t.eglise_locale.id:t.eglise_locale),p?l=await b.stats.getOverview({churchId:p}):l=await b.stats.getOverview()}w(l.data?.data||l.data||{})}catch(l){F(l,i.t("errors.api.loadStats")),w({})}})()},[t,c]);const j=a=>{y(a)};if(!s)return e.jsx(Z,{titre:i.t("home.statsLoading")});const n=[{label:i.t("home.gouvernance"),value:s.total_gouvernance,icon:B},{label:i.t("home.totalReseaux"),value:s.total_reseaux,icon:R},{label:i.t("home.responsablesReseaux"),value:s.total_resp_reseaux,icon:P},{label:i.t("home.totalGr"),value:s.total_gr,icon:L},{label:i.t("home.responsablesGr"),value:s.total_resp_gr,icon:G},{label:i.t("home.leaders"),value:s.total_leaders,icon:I},{label:i.t("home.leadersTous"),value:s.total_leaders_all,icon:I},{label:i.t("home.membresReguliers"),value:s.total_reguliers,icon:D},{label:i.t("home.membresEnIntegration"),value:s.total_integration,icon:N},{label:i.t("home.membresIrrÃ©guliers"),value:s.total_irreguliers,icon:O},{label:i.t("home.ecodim"),value:s.total_ecodim,icon:$},{label:i.t("home.responsablesEcodim"),value:s.total_resp_ecodim,icon:U}];return e.jsxs(o,{sx:{minHeight:"100vh"},children:[e.jsx(ee,{}),e.jsx(de,{}),e.jsxs(o,{width:"100%",textAlign:"center",sx:{py:6},children:[e.jsx(g,{variant:"h3",sx:{mb:2,textAlign:"center",fontWeight:800,background:"linear-gradient(135deg, #662d91, #9e005d, #9e005d)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",textShadow:"0 4px 12px rgba(102, 45, 145, 0.15)",letterSpacing:"-0.5px",animation:"fadeIn 0.8s ease-out"},children:i.t("home.title")}),e.jsx(o,{sx:{width:"80px",height:"4px",background:"linear-gradient(90deg, #662d91, #9e005d, #9e005d)",margin:"0 auto 4rem",borderRadius:"2px",animation:"scaleIn 0.6s ease-out"}}),(m||u)&&e.jsx(o,{sx:{mb:3,display:"flex",justifyContent:"center"},children:e.jsxs(H,{sx:{minWidth:250},children:[e.jsx(M,{id:"home-church-select-label",children:i.t("home.filterByChurch")}),e.jsx(T,{id:"home-church-select",name:"church",value:c?.id||c?._id||"",onChange:a=>j(a.target.value),displayEmpty:!0,label:i.t("home.filterByChurch"),labelId:"home-church-select-label",autoComplete:"off",renderValue:a=>c?c.nom:i.t("home.selectChurch"),children:f.map(a=>e.jsx(Y,{value:a.id||a._id,children:a.nom},a.id||a._id))})]})}),e.jsxs(S,{container:!0,width:"92%",mx:"auto",children:[n.map((a,l)=>e.jsx(S,{"data-aos":"fade-up",sx:{width:"100%",padding:"10px 10px 10px 10px","@media (min-width:460px) and (max-width:699px)":{width:"50%",height:"270px"},"@media (min-width:700px) and (max-width:1099px)":{width:"33.33%",height:"270px"},"@media (min-width:1100px) and (max-width:1199px)":{width:"25%",height:"270px"},"@media (min-width:1200px) and (max-width:1599px)":{width:"20%",height:"270px"},"@media (min-width:1600px)":{width:"20%"},flexBasis:"unset",maxWidth:"unset",flexGrow:0,flexShrink:0,height:"100%"},children:e.jsxs(_,{sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(k,{children:e.jsx(a.icon,{sx:{fontSize:30}})}),e.jsx(v,{variant:"h6",children:a.label}),e.jsx(v,{variant:"h4",color:"primary",children:a.value})]})},l)),e.jsx(S,{"data-aos":"fade-up",sx:{width:"100%",padding:"10px 10px 10px 10px","@media (min-width:460px) and (max-width:699px)":{width:"50%",height:"270px"},"@media (min-width:700px) and (max-width:1099px)":{width:"33.33%",height:"270px"},"@media (min-width:1100px) and (max-width:1199px)":{width:"25%",height:"270px"},"@media (min-width:1200px) and (max-width:1599px)":{width:"20%",height:"270px"},"@media (min-width:1600px)":{width:"20%"},flexBasis:"unset",maxWidth:"unset",flexGrow:0,flexShrink:0,height:"100%"},children:e.jsxs(_,{isTotal:!0,sx:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},children:[e.jsx(k,{isTotal:!0,children:e.jsx(J,{sx:{fontSize:30,color:"primary.main"}})}),e.jsx(v,{variant:"h6",sx:{color:"white"},children:i.t("home.totalEffectif")}),e.jsx(v,{variant:"h3",sx:{color:"white"},children:s.total_all})]})})]})]})]})};export{ue as default};
