import{r as o,j as e,h as ge,B as d,aM as We,T as f,G as i,aN as ke,F as _,s as S,t as E,M as I,aO as Fe,ag as Ae,aP as De,aQ as Re,al as xe,n as P,A as ae,g as Le,o as Ue,a as ce,aR as Oe,q as Be,I as L,D as Ne,a2 as qe,a3 as J,i as x,aS as Me,k as K,V as X,m as Y,u as ue,v as me,w as pe,x as fe,z as ze}from"./mui-mRVmBbre.js";import{d as Z,l as C,i as r,y as p,e as Ge,f as Ve,A as He,G as $e,T as Qe,C as Je,S as Ke,g as Xe,a as ee,j as U,k as Ye,h as Ze}from"./index-D-mMtbrf.js";import{b as er,u as rr}from"./redux-DbjaNwcH.js";import{p as re}from"./preferencesService-CpvhBlZK.js";import"./vendor-Bzgz95E1.js";import"./utils-DP_tgNw_.js";import"./router-BwhLjOj0.js";class ar{async getPreferences(){try{return(await Z.get("/preferences")).data}catch(s){throw C.error("Erreur lors de la récupération des préférences:",s),s}}async updatePreferences(s){try{return(await Z.put("/preferences",s)).data}catch(c){throw C.error("Erreur lors de la mise à jour des préférences:",c),c}}async updateEmailPreferences(s){try{return(await Z.put("/preferences/email",{email_notifications:s})).data}catch(c){throw C.error("Erreur lors de la mise à jour des préférences email:",c),c}}}const he=new ar,sr=()=>{const[n,s]=o.useState({language:"fr",theme:"light",autoTheme:!0,email_notifications:!0}),[c,y]=o.useState({language:"fr",theme:"light",autoTheme:!0,email_notifications:!0}),[u,A]=o.useState(!1),[T,W]=o.useState(!1),[k,O]=o.useState(0);o.useEffect(()=>{(async()=>{try{const h=r.getCurrentLanguage(),b=re.getPreference("autoTheme")||!0,v=await he.getPreferences(),w={language:v?.data?.language||h,theme:v?.data?.theme||"light",autoTheme:b,email_notifications:v?.data?.email_notifications??!0};s(w),y(w)}catch(h){C.error("Erreur lors du chargement des préférences:",h);const b=r.getCurrentLanguage(),v=re.getPreference("autoTheme")||!0,w={language:b,theme:"light",autoTheme:v,email_notifications:!0};s(w),y(w)}})()},[n.theme]),o.useEffect(()=>{const t=c.language!==n.language,h=c.theme!==n.theme,b=c.autoTheme!==n.autoTheme,v=c.email_notifications!==n.email_notifications;W(t||h||b||v)},[n,c]),o.useEffect(()=>{if(k>0){const t=r.getCurrentLanguage();s(h=>({...h,language:t,theme:h.theme}))}},[k]);const F=(t,h)=>{s(b=>({...b,[t]:h})),W(!0)},B=async()=>{A(!0);try{r.setLanguage(n.language),re.setPreference("autoTheme",n.autoTheme);try{const t=await he.updatePreferences({email_notifications:n.email_notifications,language:n.language,theme:n.theme});t&&t.success?C.debug("✅ Préférences sauvegardées avec succès via l'API"):C.warn("⚠️ Réponse API inattendue:",t)}catch(t){C.error("❌ Erreur API lors de la sauvegarde des préférences:",t),p.error("Erreur lors de la sauvegarde sur le serveur, mais les changements locaux sont appliqués")}O(t=>t+1),window.dispatchEvent(new CustomEvent("languageOrThemeChanged",{detail:{language:n.language,theme:n.theme,timestamp:Date.now()}})),p.success(r.t("success.preferencesSaved")),W(!1),y(n)}catch(t){p.error(r.t("errors.general")),C.error("Erreur de sauvegarde:",t)}finally{A(!1)}},j=()=>{s({language:"fr",theme:"light",autoTheme:!0}),r.setLanguage("fr"),W(!1),y(n)};return e.jsxs(ge,{elevation:0,sx:{p:4,mb:3,borderRadius:"24px",background:"linear-gradient(145deg, #FFFFFF 0%, #F5F3FF 100%)",border:"2px solid rgba(102, 45, 145, 0.1)",boxShadow:"0 10px 40px rgba(102, 45, 145, 0.08)"},children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:3,children:[e.jsx(d,{sx:{width:48,height:48,borderRadius:"50%",background:"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)",display:"flex",alignItems:"center",justifyContent:"center",mr:2,boxShadow:"0 4px 12px rgba(102, 45, 145, 0.25)"},children:e.jsx(We,{sx:{color:"white"}})}),e.jsx(f,{variant:"h5",component:"h3",sx:{fontWeight:700,background:"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:r.t("profile.preferences.title")})]}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(d,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(ke,{sx:{mr:1,color:"primary.main"}}),e.jsx(f,{variant:"subtitle1",fontWeight:"bold",children:r.t("profile.preferences.language.title")})]}),e.jsxs(_,{fullWidth:!0,children:[e.jsx(S,{id:"preferences-language-label",children:r.t("profile.preferences.language.title")}),e.jsx(E,{id:"preferences-language",name:"language",value:n.language,onChange:t=>F("language",t.target.value),label:r.t("profile.preferences.language.title"),labelId:"preferences-language-label",autoComplete:"off",children:r.getAvailableLanguages().map(t=>e.jsx(I,{value:t.code,children:e.jsxs(d,{display:"flex",alignItems:"center",children:[e.jsx("span",{style:{marginRight:"8px"},children:t.flag}),e.jsx("span",{children:t.nativeName||t.code.toUpperCase()})]})},t.code))})]})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(d,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Fe,{sx:{mr:1,color:"primary.main"}}),e.jsx(f,{variant:"subtitle1",fontWeight:"bold",children:r.t("profile.preferences.email.title")})]}),e.jsx(Ae,{control:e.jsx(De,{id:"preferences-email-notifications",name:"email_notifications",checked:n.email_notifications,onChange:t=>F("email_notifications",t.target.checked),color:"primary"}),label:e.jsxs(d,{children:[e.jsx(f,{variant:"body2",children:r.t("profile.preferences.email.notifications")}),e.jsx(f,{variant:"caption",color:"text.secondary",children:r.t("profile.preferences.email.description")})]})})]})}),e.jsx(i,{item:!0,xs:12,md:6,children:e.jsxs(d,{children:[e.jsxs(d,{display:"flex",alignItems:"center",mb:2,children:[e.jsx(Re,{sx:{mr:1,color:"primary.main"}}),e.jsx(f,{variant:"subtitle1",fontWeight:"bold",children:r.t("profile.preferences.theme.title")})]}),e.jsx(f,{variant:"body2",color:"text.secondary",sx:{fontStyle:"italic"},children:r.t("profile.preferences.theme.disabled")})]})})]}),e.jsx(xe,{sx:{my:3}}),e.jsxs(d,{display:"flex",gap:2,justifyContent:"flex-end",children:[e.jsx(P,{variant:"outlined",onClick:j,disabled:u,children:r.t("common.actions.reset")}),e.jsx(P,{variant:"contained",onClick:B,disabled:u||!T,startIcon:null,children:u?r.t("common.actions.saving"):r.t("profile.actions.savePreferences")})]}),T&&e.jsx(ae,{severity:"info",sx:{mt:2},children:r.t("profile.preferences.unsavedChanges")})]})},ur=()=>{const n=er(),{user:s}=rr(a=>a.auth),[c,y]=o.useState({username:"",email:"",pseudo:""});o.useEffect(()=>{r.init()},[]),Ge(),o.useEffect(()=>{s&&y({username:s.username||"",email:s.email||"",pseudo:s.pseudo||""})},[s]);const[u,A]=o.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[T,W]=o.useState(!1),[k,O]=o.useState(!1),[F,B]=o.useState(!1),[j,t]=o.useState({}),[h,b]=o.useState(!1),[v,w]=o.useState(!1),[se,te]=o.useState(!1),[je,N]=o.useState(!1),[q,M]=o.useState(null),[ie,z]=o.useState(null),[G,oe]=o.useState(!1),[l,V]=o.useState({username:"",pseudo:"",email:"",genre:"",tranche_age:"",profession:"",ville_residence:"",origine:"",situation_matrimoniale:"",niveau_education:"",telephone:"",adresse:"",image:"",departement_id:"",eglise_locale_id:""}),{departments:ne,loading:be}=Ve(),[D,ve]=o.useState(0);o.useEffect(()=>{s&&V({username:s.username||"",pseudo:s.pseudo||"",email:s.email||"",genre:s.genre||"",tranche_age:s.tranche_age||"",profession:s.profession||"",ville_residence:s.ville_residence||"",origine:s.origine||"",situation_matrimoniale:s.situation_matrimoniale||"",niveau_education:s.niveau_education||"",telephone:s.telephone||"",adresse:s.adresse||"",image:s.image||"",departement_id:s.departement_id||"",eglise_locale_id:s.eglise_locale_id||s.eglise_locale?.id||""})},[s]);const H=a=>{y({...c,[a.target.name]:a.target.value})},$=a=>{A({...u,[a.target.name]:a.target.value}),j[a.target.name]&&t({...j,[a.target.name]:""})},g=a=>{V({...l,[a.target.name]:a.target.value})},we=a=>{const m=a.target.files[0];if(m){if(!m.type.startsWith("image/")){p.error(r.t("profile.image.invalidFileType"));return}if(m.size>5*1024*1024){p.error(r.t("profile.image.fileTooLarge"));return}M(m);const R=new FileReader;R.onload=Te=>{z(Te.target.result)},R.readAsDataURL(m),N(!0)}a.target.value=""},le=()=>{const a=document.getElementById("profile-image-input");a?a.click():(C.error("Input file non trouvé"),p.error("Erreur: Impossible d'accéder au sélecteur de fichiers"))},Pe=async()=>{if(q){oe(!0);try{const a=new FormData;a.append("image",q);const m=await ee.users.uploadProfileImage(a);m.data&&m.data.success?(n(U({image:m.data.data.image})),p.success(r.t("profile.image.uploadSuccess")),N(!1),M(null),z(null)):p.error(m.data?.message||r.t("profile.image.uploadError"))}catch{p.error(r.t("profile.image.uploadError"))}finally{oe(!1)}}},Ce=async()=>{try{const a=await ee.users.removeProfileImage();a.data&&a.data.success?(n(U({image:""})),p.success(r.t("profile.image.removeSuccess"))):p.error(a.data?.message||r.t("profile.image.removeError"))}catch{p.error(r.t("profile.image.removeError"))}},de=()=>{N(!1),M(null),z(null)},ye=()=>{const a={};return u.currentPassword||(a.currentPassword=r.t("errors.validation.currentPasswordRequired")),u.newPassword?u.newPassword.length<6&&(a.newPassword=r.t("errors.validation.passwordMinLength")):a.newPassword=r.t("errors.validation.newPasswordRequired"),u.confirmPassword?u.newPassword!==u.confirmPassword&&(a.confirmPassword=r.t("errors.validation.passwordMismatch")):a.confirmPassword=r.t("errors.validation.confirmPasswordRequired"),u.currentPassword===u.newPassword&&(a.newPassword=r.t("errors.validation.passwordMustBeDifferent")),t(a),Object.keys(a).length===0},Ie=async a=>{a.preventDefault();try{await n(U(c)).unwrap(),p.success(r.t("success.profileUpdated"))}catch(m){p.error(m.message||r.t("errors.api.updateProfile"))}},_e=async a=>{if(a.preventDefault(),!!ye()){b(!0);try{await Ye.updatePassword({currentPassword:u.currentPassword,newPassword:u.newPassword}),p.success(r.t("success.passwordChanged")),A({currentPassword:"",newPassword:"",confirmPassword:""}),t({})}catch(m){p.error(m.message||r.t("errors.api.changePassword"))}finally{b(!1)}}},Se=()=>{s&&V({username:s.username||"",pseudo:s.pseudo||"",email:s.email||"",genre:s.genre||"",tranche_age:s.tranche_age||"",profession:s.profession||"",ville_residence:s.ville_residence||"",origine:s.origine||"",situation_matrimoniale:s.situation_matrimoniale||"",niveau_education:s.niveau_education||"",telephone:s.telephone||"",adresse:s.adresse||"",departement_id:s.departement_id||"",eglise_locale_id:s.eglise_locale_id||s.eglise_locale?.id||""}),w(!0)},Q=()=>{w(!1)},Ee=async a=>{a.preventDefault(),te(!0);try{await ee.users.updateProfile(l),p.success(r.t("success.profileCompleteUpdated")),n(U({username:l.username,pseudo:l.pseudo,email:l.email})),y({username:l.username,email:l.email,pseudo:l.pseudo}),Q()}catch(m){const R=Ze(m,"la mise à jour du profil complet");p.error(R.message)}finally{te(!1)}};return e.jsx(d,{sx:{minHeight:"100vh",pt:12,pb:6},children:e.jsxs(Le,{maxWidth:"md",children:[e.jsxs(ge,{elevation:0,sx:{p:5,mt:2,mb:4,borderRadius:"30px",background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(20px)",border:"2px solid rgba(102, 45, 145, 0.1)",boxShadow:"0 20px 60px rgba(102, 45, 145, 0.12)"},children:[e.jsxs(d,{display:"flex",flexDirection:"column",alignItems:"center",mb:4,children:[e.jsxs(d,{sx:{position:"relative",mb:3},children:[e.jsx(Ue,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:e.jsx(Oe,{size:"small",color:"primary","aria-label":r.t("profile.image.changePhoto"),onClick:le,sx:{width:32,height:32,"&:hover":{transform:"scale(1.1)",transition:"transform 0.2s"}},children:e.jsx(Be,{sx:{fontSize:16}})}),children:e.jsx(ce,{src:s?.image?`${He}/${s.image}`:void 0,sx:{width:100,height:100,bgcolor:"primary.main",cursor:"pointer","&:hover":{opacity:.8,transition:"opacity 0.2s"}},onClick:le,onError:a=>{},children:s?.username?.charAt(0)?.toUpperCase()})}),s?.image&&e.jsx(L,{size:"small",color:"error",onClick:Ce,sx:{position:"absolute",top:-8,left:-8,bgcolor:"white",border:"2px solid",borderColor:"error.main","&:hover":{bgcolor:"error.light",color:"white"}},children:e.jsx(Ne,{sx:{fontSize:16}})})]}),e.jsx("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:we,style:{display:"none"}}),e.jsx(f,{variant:"h5",gutterBottom:!0,children:r.t("profile.title")})]}),e.jsx(d,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(qe,{value:D,onChange:(a,m)=>ve(m),"aria-label":r.t("profile.tabs.informations"),centered:!0,children:[e.jsx(J,{label:r.t("profile.tabs.informations")}),e.jsx(J,{label:r.t("profile.tabs.preferences")}),e.jsx(J,{label:r.t("profile.tabs.security")})]})}),D===0&&e.jsxs(d,{children:[s?e.jsx("form",{onSubmit:Ie,children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{xs:12,children:e.jsx(x,{fullWidth:!0,id:"profile-username",label:r.t("profile.basicInfo.username"),name:"username",value:c.username,onChange:H,autoComplete:"username"})}),e.jsx(i,{xs:12,children:e.jsx(x,{fullWidth:!0,id:"profile-pseudo",label:r.t("profile.basicInfo.pseudo"),name:"pseudo",value:c.pseudo,onChange:H,autoComplete:"nickname"})}),e.jsx(i,{xs:12,children:e.jsx(x,{fullWidth:!0,id:"profile-email",label:r.t("profile.basicInfo.email"),name:"email",type:"email",value:c.email,onChange:H,autoComplete:"email"})}),e.jsx(i,{xs:12,children:e.jsx(P,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large",children:r.t("profile.basicInfo.updateButton")})})]})}):e.jsx(d,{display:"flex",justifyContent:"center",p:4,children:e.jsx(f,{variant:"body1",color:"text.secondary",children:r.t("profile.loading")})}),e.jsx(xe,{sx:{my:3}}),e.jsx(d,{display:"flex",justifyContent:"center",children:e.jsx(P,{variant:"outlined",color:"secondary",size:"large",startIcon:e.jsx(Me,{}),onClick:Se,sx:{minWidth:250},children:r.t("profile.basicInfo.editCompleteButton")})})]}),D===1&&e.jsx(sr,{}),D===2&&e.jsxs(d,{children:[e.jsx(f,{variant:"h6",gutterBottom:!0,sx:{mb:3,color:"primary.main"},children:r.t("profile.security.title")}),e.jsx("form",{onSubmit:_e,children:e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{xs:12,children:e.jsx(x,{fullWidth:!0,id:"profile-current-password",label:r.t("profile.security.currentPassword"),name:"currentPassword",type:T?"text":"password",value:u.currentPassword,onChange:$,error:!!j.currentPassword,helperText:j.currentPassword,autoComplete:"current-password",InputProps:{endAdornment:e.jsx(K,{position:"end",children:e.jsx(L,{onClick:()=>W(!T),edge:"end",children:T?e.jsx(X,{}):e.jsx(Y,{})})})}})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"profile-new-password",label:r.t("profile.security.newPassword"),name:"newPassword",type:k?"text":"password",value:u.newPassword,onChange:$,error:!!j.newPassword,helperText:j.newPassword,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(K,{position:"end",children:e.jsx(L,{onClick:()=>O(!k),edge:"end",children:k?e.jsx(X,{}):e.jsx(Y,{})})})}})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"profile-confirm-password",label:r.t("profile.security.confirmPassword"),name:"confirmPassword",type:F?"text":"password",value:u.confirmPassword,onChange:$,error:!!j.confirmPassword,helperText:j.confirmPassword,autoComplete:"new-password",InputProps:{endAdornment:e.jsx(K,{position:"end",children:e.jsx(L,{onClick:()=>B(!F),edge:"end",children:F?e.jsx(X,{}):e.jsx(Y,{})})})}})}),e.jsx(i,{xs:12,children:e.jsx(ae,{severity:"info",sx:{mb:2},children:r.t("profile.security.passwordInfo")})}),e.jsx(i,{xs:12,children:e.jsx(P,{type:"submit",variant:"contained",color:"secondary",fullWidth:!0,size:"large",disabled:h,children:h?r.t("common.actions.processing"):r.t("profile.security.changePasswordButton")})})]})})]})]}),e.jsxs(ue,{open:v,onClose:Q,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"24px",boxShadow:"0 20px 60px rgba(102, 45, 145, 0.15)",background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)",border:"2px solid rgba(102, 45, 145, 0.1)"}},children:[e.jsx(me,{sx:{borderBottom:"2px solid rgba(102, 45, 145, 0.1)",background:"linear-gradient(145deg, #FFFFFF 0%, #F5F3FF 100%)"},children:e.jsx(f,{variant:"h5",sx:{fontWeight:700,background:"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:r.t("profile.completeProfile.title")})}),e.jsxs("form",{onSubmit:Ee,children:[e.jsxs(pe,{children:[l.username?e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-username",label:r.t("profile.completeProfile.username"),name:"username",value:l.username,onChange:g,required:!0,autoComplete:"username"})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-pseudo",label:r.t("profile.completeProfile.pseudo"),name:"pseudo",value:l.pseudo,onChange:g,required:!0,autoComplete:"nickname"})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-email",label:r.t("profile.completeProfile.email"),name:"email",type:"email",value:l.email,onChange:g,autoComplete:"email"})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-telephone",label:r.t("profile.completeProfile.telephone"),name:"telephone",value:l.telephone,onChange:g,autoComplete:"tel"})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,required:!0,children:[e.jsx(S,{id:"complete-profile-genre-label",children:r.t("profile.completeProfile.genre")}),e.jsx(E,{id:"complete-profile-genre",name:"genre",value:l.genre,onChange:g,label:r.t("profile.completeProfile.genre"),labelId:"complete-profile-genre-label",autoComplete:"sex",children:$e.map(a=>e.jsx(I,{value:a.value,children:a.label},a.value))})]})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,required:!0,children:[e.jsx(S,{id:"complete-profile-tranche-age-label",children:r.t("profile.completeProfile.trancheAge")}),e.jsx(E,{id:"complete-profile-tranche-age",name:"tranche_age",value:l.tranche_age,onChange:g,label:r.t("profile.completeProfile.trancheAge"),labelId:"complete-profile-tranche-age-label",autoComplete:"bday",children:Qe.map(a=>e.jsx(I,{value:a.value,children:a.label},a.value))})]})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-profession",label:r.t("profile.completeProfile.profession"),name:"profession",value:l.profession,onChange:g,required:!0,autoComplete:"organization-title"})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,id:"complete-profile-ville-residence",label:r.t("profile.completeProfile.villeResidence"),name:"ville_residence",value:l.ville_residence,onChange:g,autoComplete:"address-level2",required:!0})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,required:!0,children:[e.jsx(S,{id:"complete-profile-origine-label",children:r.t("profile.completeProfile.origine")}),e.jsx(E,{id:"complete-profile-origine",name:"origine",value:l.origine,onChange:g,label:r.t("profile.completeProfile.origine"),labelId:"complete-profile-origine-label",autoComplete:"country",children:Je.map(a=>e.jsx(I,{value:a.value,children:a.label},a.value))})]})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,required:!0,children:[e.jsx(S,{id:"complete-profile-situation-matrimoniale-label",children:r.t("profile.completeProfile.situationMatrimoniale")}),e.jsx(E,{id:"complete-profile-situation-matrimoniale",name:"situation_matrimoniale",value:l.situation_matrimoniale,onChange:g,label:r.t("profile.completeProfile.situationMatrimoniale"),labelId:"complete-profile-situation-matrimoniale-label",autoComplete:"off",children:Ke.map(a=>e.jsx(I,{value:a.value,children:a.label},a.value))})]})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,required:!0,children:[e.jsx(S,{id:"complete-profile-niveau-education-label",children:r.t("profile.completeProfile.niveauEducation")}),e.jsx(E,{id:"complete-profile-niveau-education",name:"niveau_education",value:l.niveau_education,onChange:g,label:r.t("profile.completeProfile.niveauEducation"),labelId:"complete-profile-niveau-education-label",autoComplete:"off",children:Xe.map(a=>e.jsx(I,{value:a.value,children:a.label},a.value))})]})}),e.jsx(i,{xs:12,md:6,children:e.jsxs(_,{fullWidth:!0,sx:{minWidth:180},children:[e.jsx(S,{id:"complete-profile-departement-label",children:r.t("profile.completeProfile.departement")}),e.jsxs(E,{id:"complete-profile-departement",name:"departement_id",value:l.departement_id||"",onChange:g,label:r.t("profile.completeProfile.departement"),labelId:"complete-profile-departement-label",disabled:be,autoComplete:"off",children:[e.jsx(I,{value:"",children:e.jsx("em",{children:r.t("profile.completeProfile.noDepartement")})}),Array.isArray(ne)&&ne.map(a=>e.jsx(I,{value:a.id,children:a.nom},a.id))]})]})}),e.jsx(i,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,label:r.t("profile.completeProfile.adresse"),name:"adresse",value:l.adresse,onChange:g,multiline:!0,rows:3})})]}):e.jsx(d,{display:"flex",justifyContent:"center",p:4,children:e.jsx(f,{variant:"body1",color:"text.secondary",children:r.t("profile.completeProfile.loading")})}),e.jsxs(ae,{severity:"info",sx:{mt:2},children:[e.jsx("strong",{children:"Note :"})," ",r.t("profile.completeProfile.note")]})]}),e.jsxs(fe,{children:[e.jsx(P,{onClick:Q,color:"primary",children:r.t("common.actions.cancel")}),e.jsx(P,{type:"submit",variant:"contained",color:"primary",disabled:se,children:se?r.t("common.actions.processing"):r.t("common.actions.save")})]})]})]}),e.jsxs(ue,{open:je,onClose:de,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"24px",boxShadow:"0 20px 60px rgba(102, 45, 145, 0.15)"}},children:[e.jsx(me,{sx:{fontWeight:700,background:"linear-gradient(135deg, rgb(59, 20, 100) 0%, #662d91 50%, #9e005d 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:r.t("profile.image.previewTitle")}),e.jsx(pe,{children:e.jsxs(d,{sx:{display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[ie&&e.jsx(ce,{src:ie,sx:{width:150,height:150,border:"3px solid",borderColor:"primary.main"}}),e.jsx(f,{variant:"body2",color:"text.secondary",textAlign:"center",children:q?.name}),e.jsx(f,{variant:"caption",color:"text.secondary",textAlign:"center",children:r.t("profile.image.confirmUpload")})]})}),e.jsxs(fe,{children:[e.jsx(P,{onClick:de,color:"primary",children:r.t("common.actions.cancel")}),e.jsx(P,{onClick:Pe,variant:"contained",color:"primary",disabled:G,startIcon:G?e.jsx(ze,{size:16}):null,children:G?r.t("common.actions.uploading"):r.t("common.actions.upload")})]})]})]})})};export{ur as default};
