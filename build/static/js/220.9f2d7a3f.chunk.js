"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[220],{22094:(e,s,r)=>{r.d(s,{A:()=>o});r(65043);var a=r(53969),t=r(94799),n=r(55895),c=r(45350),l=r(56266),i=r(70579);const o=e=>{let{allowedRoles:s=[],children:r,fallback:o=null,showMessage:u=!0}=e;const d=(0,c.S)();return s.some(e=>{switch(e){case"SUPER_ADMIN":return d.isSuperAdmin;case"ADMIN":return d.isAdmin;case"MANAGER":return d.isManager;case"SUPERVISEUR":return d.isSuperviseur;case"COLLECTEUR_CULTE":return d.isCollecteurCulte;case"COLLECTEUR_RESEAUX":return d.isCollecteurReseaux;default:return!1}})?r:o||(u?(0,i.jsx)(a.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"50vh",p:3},children:(0,i.jsxs)(t.A,{elevation:3,sx:{p:4,textAlign:"center",maxWidth:500},children:[(0,i.jsx)(n.A,{variant:"h5",color:"error",gutterBottom:!0,children:l.A.t("errors.accessDenied")}),(0,i.jsx)(n.A,{variant:"body1",color:"text.secondary",paragraph:!0,children:l.A.t("errors.insufficientPermissions")}),(0,i.jsx)(n.A,{variant:"body2",color:"text.secondary",children:l.A.t("errors.contactAdmin")})]})}):null)}},24634:(e,s,r)=>{r.d(s,{A$:()=>h,RN:()=>d,fI:()=>u,kp:()=>o});var a=r(89379),t=r(80045),n=r(65043),c=r(77210),l=r(41894);const i=["churchId"],o=(new Map,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[s,r]=(0,n.useState)([]),[a,t]=(0,n.useState)(!1),[i,o]=(0,n.useState)(null),u=JSON.stringify(e),d=(0,n.useMemo)(()=>e,[u]),h=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;try{var s;t(!0),o(null);const a=await l.apiService.users.getAll(e);return r((null===(s=a.data)||void 0===s?void 0:s.data)||a.data||[]),a}catch(a){const e=(0,c.hS)(a,"le chargement des utilisateurs");o(e.message);const s=new Error(e.message);throw s.userMessage=e.message,s}finally{t(!1)}},[d]);(0,n.useEffect)(()=>{Object.keys(d).length>0&&h()},[d,h]);const g=(0,n.useCallback)(async e=>{try{t(!0),o(null);const s=await l.apiService.users.create(e);return await h(),s}catch(s){const e=(0,c.hS)(s,"la cr\xe9ation de l'utilisateur"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{t(!1)}},[h]),w=(0,n.useCallback)(async(e,s)=>{try{t(!0),o(null);const r=await l.apiService.users.update(e,s);return await h(),r}catch(r){const e=(0,c.hS)(r,"la mise \xe0 jour de l'utilisateur"),s=new Error(e.message);throw s.userMessage=e.message,s}finally{t(!1)}},[h]),v=(0,n.useCallback)(async e=>{try{t(!0),o(null);const s=await l.apiService.users.delete(e);return await h(),s}catch(s){const e=(0,c.hS)(s,"la suppression de l'utilisateur"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{t(!1)}},[h]);return{users:s,loading:a,error:i,fetchUsers:h,createUser:g,updateUser:w,deleteUser:v}}),u=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[s,r]=(0,n.useState)([]),[o,u]=(0,n.useState)(!1),[d,h]=(0,n.useState)(null),g=(0,n.useMemo)(()=>{const{churchId:s}=e,r=(0,t.A)(e,i);return(0,a.A)({churchId:s||null},r)},[e.churchId,JSON.stringify(e)]),w=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g;try{if(u(!0),h(null),!e||!e.churchId)return r([]),void h(null);const s=await l.apiService.networks.getAll(e);if(s.data){const e=s.data.data||s.data;r(Array.isArray(e)?e:[]),h(null)}else h("Aucune donn\xe9e re\xe7ue du serveur"),r([])}catch(a){let e="Erreur lors du chargement des r\xe9seaux";var s;if(a.response)e=(null===(s=a.response.data)||void 0===s?void 0:s.message)||"Erreur ".concat(a.response.status,": ").concat(a.response.statusText);else e=a.request?"Erreur de connexion au serveur":a.message||"Erreur inconnue";h(e),r([])}finally{u(!1)}},[g]);(0,n.useEffect)(()=>{g&&g.churchId?w():(r([]),h(null))},[g,w]);const v=(0,n.useCallback)(async e=>{try{u(!0),h(null);const s=await l.apiService.networks.create(e);return await w(),s}catch(s){const e=(0,c.hS)(s,"la cr\xe9ation du r\xe9seau"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{u(!1)}},[w]),y=(0,n.useCallback)(async(e,s)=>{try{u(!0),h(null);const r=await l.apiService.networks.update(e,s);return await w(),r}catch(r){const e=(0,c.hS)(r,"la mise \xe0 jour du r\xe9seau"),s=new Error(e.message);throw s.userMessage=e.message,s}finally{u(!1)}},[w]),f=(0,n.useCallback)(async e=>{try{u(!0),h(null);const s=await l.apiService.networks.delete(e);return await w(),s}catch(s){const e=(0,c.hS)(s,"la suppression du r\xe9seau"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{u(!1)}},[w]);return{networks:s,loading:o,error:d,fetchNetworks:w,createNetwork:v,updateNetwork:y,deleteNetwork:f}},d=()=>{const[e,s]=(0,n.useState)([]),[r,a]=(0,n.useState)(!1),[t,i]=(0,n.useState)(null),o=(0,n.useCallback)(async()=>{try{var e;a(!0),i(null);const r=await l.apiService.churches.getAll();return s((null===(e=r.data)||void 0===e?void 0:e.data)||r.data||[]),r}catch(r){const e=(0,c.hS)(r,"Erreur lors du chargement des \xe9glises"),s=new Error(e.message);throw s.userMessage=e.message,s}finally{a(!1)}},[]);return(0,n.useEffect)(()=>{o()},[o]),{churches:e,loading:r,error:t,fetchChurches:o}},h=()=>{const[e,s]=(0,n.useState)([]),[r,a]=(0,n.useState)(!1),[t,i]=(0,n.useState)(null),o=(0,n.useCallback)(async e=>{try{var r;a(!0),i(null);const t=await l.apiService.services.getAll(e);return s((null===(r=t.data)||void 0===r?void 0:r.data)||t.data||[]),t}catch(t){const e=(0,c.hS)(t,"Erreur lors du chargement des services"),s=new Error(e.message);throw s.userMessage=e.message,s}finally{a(!1)}},[]),u=(0,n.useCallback)(async e=>{try{a(!0),i(null);const s=await l.apiService.services.create(e);return await o(),s}catch(s){const e=(0,c.hS)(s,"Erreur lors de la cr\xe9ation"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{a(!1)}},[o]),d=(0,n.useCallback)(async(e,s)=>{try{a(!0),i(null);const r=await l.apiService.services.update(e,s);return await o(),r}catch(r){const e=(0,c.hS)(r,"Erreur lors de la mise \xe0 jour"),s=new Error(e.message);throw s.userMessage=e.message,s}finally{a(!1)}},[o]),h=(0,n.useCallback)(async e=>{try{a(!0),i(null);const s=await l.apiService.services.delete(e);return await o(),s}catch(s){const e=(0,c.hS)(s,"Erreur lors de la suppression"),r=new Error(e.message);throw r.userMessage=e.message,r}finally{a(!1)}},[o]);return{services:e,loading:r,error:t,fetchServices:o,createService:u,updateService:d,deleteService:h}}},37251:(e,s,r)=>{r.d(s,{h:()=>n});var a=r(89379),t=r(65043);const n=()=>{const[e,s]=(0,t.useState)({open:!1,message:"",severity:"info"}),r=(0,t.useCallback)(function(e){s({open:!0,message:e,severity:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info"})},[]),n=(0,t.useCallback)(()=>{s(e=>(0,a.A)((0,a.A)({},e),{},{open:!1}))},[]),c=(0,t.useCallback)(e=>{r(e,"success")},[r]),l=(0,t.useCallback)(e=>{r(e,"error")},[r]),i=(0,t.useCallback)(e=>{r(e,"warning")},[r]),o=(0,t.useCallback)(e=>{r(e,"info")},[r]);return{notification:e,showNotification:r,hideNotification:n,showSuccess:c,showError:l,showWarning:i,showInfo:o}}},83140:(e,s,r)=>{r.d(s,{A:()=>d});r(65043);var a=r(33023),t=r(81911),n=r(78776),c=r(9200),l=r(85877),i=r(12097),o=r(56266),u=r(70579);const d=e=>{let{open:s,onClose:r,onConfirm:d,title:h,content:g}=e;return(0,u.jsxs)(a.A,{open:s,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,u.jsx)(t.A,{id:"alert-dialog-title",children:h}),(0,u.jsx)(n.A,{children:(0,u.jsx)(c.A,{id:"alert-dialog-description",children:g})}),(0,u.jsxs)(l.A,{children:[(0,u.jsx)(i.A,{onClick:r,children:o.A.t("common.actions.cancel")}),(0,u.jsx)(i.A,{onClick:d,color:"error",variant:"contained",autoFocus:!0,children:o.A.t("common.actions.delete")})]})]})}}}]);
//# sourceMappingURL=220.9f2d7a3f.chunk.js.map